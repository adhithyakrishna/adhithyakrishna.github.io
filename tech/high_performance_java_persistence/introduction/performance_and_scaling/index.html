<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Performance and Scaling â€“ Akrishna</title><script defer src=/js/fuse.min.94c78ad70b02749822921660cf4e9f0b3701bc0680c421afb784a78228de0275.js></script><script src=/js/enquire.min.dfb99dee1e029d51d6cfb672d847929890b1585402de17f5ed092edd72a688b4.js></script><script defer src=/js/lazysizes.min.31dd6a2d3a1ec0f78a8df007535cf23f03aeb5c70f026e6d6a19dac3b3acc340.js></script><script defer src=/js/helper/getParents.min.1618c696be7c98933f9a92677f518b512a74e55bdbb976b09936b4182e93181b.js></script><script defer src=/js/helper/fadeinout.min.93a331f96194789a542f33690bbe4f0c102c7e78ffc018217f5a1c33010bad91.js></script><script>"use strict";window.onload=function(){var languagedir=JSON.parse("\"ltr\"");var baseurl=JSON.parse("\"https://adhithyakrishna.github.io/\"");var permalink=JSON.parse("\"https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/\"");var toggleSidebarElem=document.getElementById("toggle-sidebar");var toggleMenuElem=document.getElementById("toggle-menu");var tocBodyElem=document.querySelector('.toc__body');var tocLabelElem=document.querySelector('.toc__label');var listMainElem=document.getElementById('list-main');var listSideElem=document.getElementById('list-side');var singleMenuElem=document.getElementById('single-menu');var sliderIcons=document.querySelectorAll('.slider__icon');toggleSidebarElem?toggleSidebarElem.addEventListener('change',function(e){if(e.target.checked){if(tocBodyElem){fadeIn(tocBodyElem,200);}
if(tocLabelElem){fadeIn(tocLabelElem,200);}
if(listMainElem&&listSideElem){listMainElem.className='m';listSideElem.className='r';}
sliderIcons&&sliderIcons.forEach(function(elem){if(elem.classList.contains('hide')){elem.classList.remove('hide');}else{elem.classList.add('hide');}});}else{if(tocBodyElem){fadeOut(tocBodyElem,200);}
if(tocLabelElem){fadeOut(tocLabelElem,200);}
if(listMainElem&&listSideElem){listMainElem.className='mr';listSideElem.className='hide';}
sliderIcons&&sliderIcons.forEach(function(elem){if(elem.classList.contains('hide')){elem.classList.remove('hide');}else{elem.classList.add('hide');}});}}):null;toggleMenuElem?toggleMenuElem.addEventListener('change',function(e){if(e.target.checked){if(listMainElem&&singleMenuElem){listMainElem.className='m';singleMenuElem.className='l';}
sliderIcons&&sliderIcons.forEach(function(elem){if(elem.classList.contains('hide')){elem.classList.remove('hide');}else{elem.classList.add('hide');}});}else{if(listMainElem&&singleMenuElem){listMainElem.className='lm';singleMenuElem.className='hide';}
sliderIcons&&sliderIcons.forEach(function(elem){if(elem.classList.contains('hide')){elem.classList.remove('hide');}else{elem.classList.add('hide');}});}}):null;var navCollapseBtn=document.getElementById('navCollapseBtn');navCollapseBtn?navCollapseBtn.addEventListener('click',function(e){var navCollapse=document.querySelector('.navbar__collapse');if(navCollapse){var dataOpen=navCollapse.getAttribute('data-open');if(dataOpen==='true'){navCollapse.setAttribute('data-open','false');navCollapse.style.maxHeight=0;}else{navCollapse.setAttribute('data-open','true');navCollapse.style.maxHeight=navCollapse.scrollHeight+"px";}}}):null;var expandBtn=document.querySelectorAll('.expand__button');for(let i=0;i<expandBtn.length;i++){expandBtn[i].addEventListener("click",function(){var content=this.nextElementSibling;if(content.style.maxHeight){content.style.maxHeight=null;this.querySelector('svg').classList.add('expand-icon__right');this.querySelector('svg').classList.remove('expand-icon__down');}else{content.style.maxHeight=content.scrollHeight+"px";this.querySelector('svg').classList.remove('expand-icon__right');this.querySelector('svg').classList.add('expand-icon__down');}});}
document.querySelectorAll('.tab')?document.querySelectorAll('.tab').forEach(function(elem,idx){var containerId=elem.getAttribute('id');var containerElem=elem;var tabLinks=elem.querySelectorAll('.tab__link');var tabContents=elem.querySelectorAll('.tab__content');var ids=[];tabLinks&&tabLinks.length>0?tabLinks.forEach(function(link,index,self){link.onclick=function(e){for(var i=0;i<self.length;i++){if(index===parseInt(i,10)){if(!self[i].classList.contains('active')){self[i].classList.add('active');tabContents[i].style.display='block';}}else{self[i].classList.remove('active');tabContents[i].style.display='none';}}}}):null;}):null;document.querySelectorAll('.codetab')?document.querySelectorAll('.codetab').forEach(function(elem,idx){var containerId=elem.getAttribute('id');var containerElem=elem;var codetabLinks=elem.querySelectorAll('.codetab__link');var codetabContents=elem.querySelectorAll('.codetab__content');var ids=[];codetabLinks&&codetabLinks.length>0?codetabLinks.forEach(function(link,index,self){link.onclick=function(e){for(var i=0;i<self.length;i++){if(index===parseInt(i,10)){if(!self[i].classList.contains('active')){self[i].classList.add('active');codetabContents[i].style.display='block';}}else{self[i].classList.remove('active');codetabContents[i].style.display='none';}}}}):null;}):null;var enableDarkMode=JSON.parse("true");var root=document.getElementById('root');var toggleToLightBtn=document.getElementById('toggleToLight');var toggleToDarkBtn=document.getElementById('toggleToDark');if(!enableDarkMode){root.className='theme__light';localStorage.setItem('theme','light');}
if(toggleToDarkBtn){toggleToDarkBtn.onclick=function(e){root.className='theme__dark';localStorage.setItem('theme','dark');toggleToLightBtn.className='navbar__icons--icon';toggleToDarkBtn.className='hide';}}
if(toggleToLightBtn){toggleToLightBtn.onclick=function(e){root.className='theme__light';localStorage.setItem('theme','light');toggleToLightBtn.className='hide';toggleToDarkBtn.className='navbar__icons--icon';}}
document.querySelectorAll('.menu__list').forEach(function(elem){if(elem.classList.contains('active')){elem.style.maxHeight=elem.scrollHeight+"px";}});document.querySelectorAll('.menu__title--collapse').forEach(function(elem){elem.addEventListener('click',function(e){var content=this.nextElementSibling;var menuTitleIcon=this.querySelector('.menu__title--icon');if(!content){return null;}
var parent=elem.parentNode;while(parent.classList.contains('menu__list')&&parent.classList.contains('active')){parent.style.maxHeight=100*parent.children.length+"px";parent=parent.parentNode;}
if(content.style.maxHeight){content.style.maxHeight=null;content.classList.remove('active');menuTitleIcon.classList.add('right');if(languagedir==='rtl'){menuTitleIcon.classList.remove('downrtl');}else{menuTitleIcon.classList.remove('down');}}else{content.style.maxHeight=content.scrollHeight+"px";content.classList.add('active');menuTitleIcon.classList.remove('right');if(languagedir==='rtl'){menuTitleIcon.classList.add('downrtl');}else{menuTitleIcon.classList.add('down');}}});});var mobileLogo=document.getElementById('mobileLogo');var modal=document.getElementById("myModal");var drawer=document.getElementById('myDrawer');var drawerCloseBtn=document.querySelector('.drawer__close');var openDrawer=function(){modal.style.opacity=1;if(languagedir==='rtl'){modal.style.right=0;drawer.style.right=0;}else{modal.style.left=0;drawer.style.left=0;}}
var closeDrawer=function(){modal.style.opacity=0;if(languagedir==='rtl'){drawer.style.right='-100%';}else{drawer.style.left='-100%';}
setTimeout(function(){if(languagedir==='rtl'){modal.style.right='-100%';}else{modal.style.left='-100%';}},250);}
mobileLogo.onclick=function(){openDrawer();localStorage.setItem('isDrawerOpen','true');}
modal.onclick=function(){closeDrawer();localStorage.setItem('isDrawerOpen','false');}
drawerCloseBtn.onclick=function(){closeDrawer();localStorage.setItem('isDrawerOpen','false');}
var lastScrollTop=window.pageYOffset||document.documentElement.scrollTop;var tocElem=document.querySelector('.toc');var tableOfContentsElem=tocElem?tocElem.querySelector('#TableOfContents'):null;var singleContentsElem=document.querySelector('.single__contents');var dataBGImgs=document.querySelectorAll('div[data-bgimg]');var tocLevels=JSON.parse("[\"h1\",\"h2\",\"h3\",\"h4\"]");if(tocLevels){tocLevels=tocLevels.toString();}else{tocLevels="h1, h2, h3, h4, h5, h6";}
var isLandingBgImg=JSON.parse("null");var isHome=JSON.parse("false");function setNavbarBG(scrollTop){if(isHome&&isLandingBgImg&&Object.keys(isLandingBgImg).length){if(isLandingBgImg.height<=scrollTop){dataBGImgs.forEach(function(elem){elem.setAttribute('data-bgimg','false');});}else{dataBGImgs.forEach(function(elem){elem.setAttribute('data-bgimg','true');});}}}
setNavbarBG(lastScrollTop);window.onscroll=function(){var st=window.pageYOffset||document.documentElement.scrollTop;if(st>lastScrollTop){singleContentsElem?singleContentsElem.querySelectorAll(tocLevels.toString()).forEach(function(elem){if(document.documentElement.scrollTop>=elem.offsetTop){if(tableOfContentsElem){var id=elem.getAttribute('id');tocElem.querySelectorAll('a').forEach(function(elem){elem.classList.remove('active');});tocElem.querySelector('a[href="#'+id+'"]')?tocElem.querySelector('a[href="#'+id+'"]').classList.add('active'):null;}}}):null;setNavbarBG(st);}else{singleContentsElem?singleContentsElem.querySelectorAll(tocLevels.toString()).forEach(function(elem){if(document.documentElement.scrollTop>=elem.offsetTop){if(tableOfContentsElem){var id=elem.getAttribute('id');tocElem.querySelectorAll('a').forEach(function(elem){elem.classList.remove('active');});tocElem.querySelector('a[href="#'+id+'"]')?tocElem.querySelector('a[href="#'+id+'"]').classList.add('active'):null;}}}):null;setNavbarBG(st);}
lastScrollTop=st<=0?0:st;};var mobileSearchInputElem=document.querySelector('#search-mobile');var mobileSearchClassElem=document.querySelector('.mobile-search');var mobileSearchBtnElem=document.querySelector('#mobileSearchBtn');var mobileSearchCloseBtnElem=document.querySelector('#search-mobile-close');var mobileSearchContainer=document.querySelector('#search-mobile-container');var mobileSearchResultsElem=document.querySelector('#search-mobile-results');var htmlElem=document.querySelector('html');if(mobileSearchClassElem){mobileSearchClassElem.style.display='none';}
mobileSearchBtnElem?mobileSearchBtnElem.addEventListener('click',function(){if(mobileSearchContainer){mobileSearchContainer.style.display='block';}
if(mobileSearchInputElem){mobileSearchInputElem.focus();}
if(htmlElem){htmlElem.style.overflowY='hidden';}}):null;mobileSearchCloseBtnElem?mobileSearchCloseBtnElem.addEventListener('click',function(){if(mobileSearchContainer){mobileSearchContainer.style.display='none';}
if(mobileSearchInputElem){mobileSearchInputElem.value='';}
if(mobileSearchResultsElem){while(mobileSearchResultsElem.firstChild){mobileSearchResultsElem.removeChild(mobileSearchResultsElem.firstChild);}}
if(htmlElem){htmlElem.style.overflowY='visible';}}):null;mobileSearchInputElem?mobileSearchInputElem.addEventListener('keydown',function(e){if(e.key==='Escape'){if(mobileSearchContainer){mobileSearchContainer.style.display='none';}
if(mobileSearchInputElem){mobileSearchInputElem.value='';}
if(mobileSearchResultsElem){while(mobileSearchResultsElem.firstChild){mobileSearchResultsElem.removeChild(mobileSearchResultsElem.firstChild);}}
if(htmlElem){htmlElem.style.overflowY='visible';}}}):null;var localTheme=localStorage.getItem('theme');var rootEleme=document.getElementById('root');var selectThemeElem=document.querySelectorAll('.select-theme');var selectThemeItemElem=document.querySelectorAll('.select-theme__item');if(localTheme){selectThemeItemElem?selectThemeItemElem.forEach(function(elem){if(elem.text.trim()===localTheme){elem.classList.add('is-active');}else{elem.classList.remove('is-active');}}):null;}
selectThemeItemElem?selectThemeItemElem.forEach(function(v,i){v.addEventListener('click',function(e){var selectedThemeVariant=e.target.text.trim();localStorage.setItem('theme',selectedThemeVariant);rootEleme.removeAttribute('class');rootEleme.classList.add(`theme__${selectedThemeVariant}`);selectThemeElem.forEach(function(rootElem){rootElem.querySelectorAll('a').forEach(function(elem){if(elem.classList){if(elem.text.trim()===selectedThemeVariant){if(!elem.classList.contains('is-active')){elem.classList.add('is-active');}}else{if(elem.classList.contains('is-active')){elem.classList.remove('is-active');}}}});});if(window.mermaid){if(selectedThemeVariant==="dark"||selectedThemeVariant==="hacker"){mermaid.initialize({theme:'dark'});location.reload();}else{mermaid.initialize({theme:'default'});location.reload();}}
var utterances=document.querySelector('iframe');if(utterances){utterances.contentWindow.postMessage({type:'set-theme',theme:selectedThemeVariant==="dark"||selectedThemeVariant==="hacker"?'photon-dark':selectedThemeVariant==='kimbie'?'github-dark-orange':'github-light',},'https://utteranc.es');}});}):null;var langprefix=JSON.parse("\"\"");var searchResults=null;var searchMenu=null;var searchText=null;var enableSearchHighlight=JSON.parse("true");var enableSearch=JSON.parse("true");var fuse=null;if(enableSearch){(function initFuse(){var xhr=new XMLHttpRequest();xhr.open('GET',baseurl+langprefix+"/index.json");xhr.setRequestHeader('Content-Type','application/json; charset=utf-8');xhr.onload=function(){if(xhr.status===200){fuse=new Fuse(JSON.parse(xhr.response.toString('utf-8')),{keys:['title','description','content'],includeMatches:enableSearchHighlight,shouldSort:true,threshold:0.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,});}
else{console.error(`[${xhr.status}]Error:`,xhr.statusText);}};xhr.send();})();}
function makeLi(ulElem,obj){var li=document.createElement('li');li.className='search-result__item';var a=document.createElement('a');a.innerHTML=obj.title;a.setAttribute('class','search-result__item--title');a.setAttribute('href',obj.permalink);var descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');if(obj.description){descDiv.innerHTML=obj.description;}else if(obj.content){descDiv.innerHTML=obj.content.substring(0,80);}
li.appendChild(a);li.appendChild(descDiv);ulElem.appendChild(li);}
function makeHighlightLi(ulElem,obj){var li=document.createElement('li');li.className='search-result__item';var descDiv=null;var a=document.createElement('a');a.innerHTML=obj.item.title;a.setAttribute('class','search-result__item--title');a.setAttribute('href',obj.item.uri);if(obj.matches&&obj.matches.length){for(var i=0;i<obj.matches.length;i++){if('title'===obj.matches[i].key){a=document.createElement('a');a.innerHTML=generateHighlightedText(obj.matches[i].value,obj.matches[i].indices);a.setAttribute('class','search-result__item--title');a.setAttribute('href',obj.item.uri);}
if('description'===obj.matches[i].key){descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');descDiv.innerHTML=generateHighlightedText(obj.item.description,obj.matches[i].indices);}else if('content'===obj.matches[i].key){if(!descDiv){descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');descDiv.innerHTML=generateHighlightedText(obj.item.content.substring(0,80),obj.matches[i].indices);}}else{if(obj.item.description){descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');descDiv.innerHTML=obj.item.description;}else{descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');descDiv.innerHTML=obj.item.content.substring(0,80);}}}
li.appendChild(a);if(descDiv){li.appendChild(descDiv);}
if(li){ulElem.appendChild(li);}}}
function renderSearchResults(searchText,results){searchResults=document.getElementById('search-results');searchMenu=document.getElementById('search-menu');searchResults.setAttribute('class','dd is-active');var ul=document.createElement('ul');ul.setAttribute('class','dd-content search-content');if(results.length){results.forEach(function(result){var li=document.createElement('li');var a=document.createElement('a');a.setAttribute('href',result.uri);a.setAttribute('class','dd-item');a.appendChild(li);var titleDiv=document.createElement('div');titleDiv.innerHTML=result.title;titleDiv.setAttribute('class','search-result__item--title');var descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');if(result.description){descDiv.innerHTML=result.description;}else if(result.content){descDiv.innerHTML=result.content.substring(0,80);}
li.appendChild(titleDiv);li.appendChild(descDiv);ul.appendChild(a);});}else{var li=document.createElement('li');li.setAttribute('class','dd-item');li.innerText='No results found';ul.appendChild(li);}
while(searchMenu.hasChildNodes()){searchMenu.removeChild(searchMenu.lastChild);}
searchMenu.appendChild(ul);}
function renderSearchHighlightResults(searchText,results){searchResults=document.getElementById('search-results');searchMenu=document.getElementById('search-menu');searchResults.setAttribute('class','dd is-active');var ul=document.createElement('ul');ul.setAttribute('class','dd-content search-content');if(results.length){results.forEach(function(result){var li=document.createElement('li');var a=document.createElement('a');var descDiv=null;a.setAttribute('href',result.item.uri);a.setAttribute('class','dd-item');a.appendChild(li);var titleDiv=document.createElement('div');titleDiv.innerHTML=result.item.title;titleDiv.setAttribute('class','search-result__item--title');if(result.matches&&result.matches.length){for(var i=0;i<result.matches.length;i++){if('title'===result.matches[i].key){titleDiv.innerHTML=generateHighlightedText(result.matches[i].value,result.matches[i].indices);}
if('description'===result.matches[i].key){descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');descDiv.innerHTML=generateHighlightedText(result.item.description,result.matches[i].indices);}else if('content'===result.matches[i].key){if(!descDiv){descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');descDiv.innerHTML=generateHighlightedText(result.item.content.substring(0,80),result.matches[i].indices);}}else{if(result.item.description){descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');descDiv.innerHTML=result.item.description;}else{descDiv=document.createElement('div');descDiv.setAttribute('class','search-result__item--desc');descDiv.innerHTML=result.item.content.substring(0,80);}}}
li.appendChild(titleDiv);if(descDiv){li.appendChild(descDiv);}
ul.appendChild(a);}});}else{var li=document.createElement('li');li.setAttribute('class','dd-item');li.innerText='No results found';ul.appendChild(li);}
while(searchMenu.hasChildNodes()){searchMenu.removeChild(searchMenu.lastChild);}
searchMenu.appendChild(ul);}
function renderSearchResultsMobile(searchText,results){searchResults=document.getElementById('search-mobile-results');var content=document.createElement('div');content.setAttribute('class','mobile-search__content');if(results.length>0){results.forEach(function(result){var item=document.createElement('a');item.setAttribute('href',result.uri);item.innerHTML='<div class="mobile-search__item"><div class="mobile-search__item--title">ðŸ“„ '+result.title+'</div><div class="mobile-search__item--desc">'+(result.description?result.description:result.content)+'</div></div>';content.appendChild(item);});}else{var item=document.createElement('span');content.appendChild(item);}
let wrap=document.getElementById('search-mobile-results');while(wrap.firstChild){wrap.removeChild(wrap.firstChild)}
searchResults.appendChild(content);}
function renderSearchHighlightResultsMobile(searchText,results){searchResults=document.getElementById('search-mobile-results');var ul=document.createElement('div');ul.setAttribute('class','mobile-search__content');if(results.length){results.forEach(function(result){var li=document.createElement('li');var a=document.createElement('a');var descDiv=null;a.setAttribute('href',result.item.uri);a.appendChild(li);li.setAttribute('class','mobile-search__item');var titleDiv=document.createElement('div');titleDiv.innerHTML=result.item.title;titleDiv.setAttribute('class','mobile-search__item--title');if(result.matches&&result.matches.length){for(var i=0;i<result.matches.length;i++){if('title'===result.matches[i].key){titleDiv.innerHTML=generateHighlightedText(result.matches[i].value,result.matches[i].indices);}
if('description'===result.matches[i].key){descDiv=document.createElement('div');descDiv.setAttribute('class','mobile-search__item--desc');descDiv.innerHTML=generateHighlightedText(result.item.description,result.matches[i].indices);}else if('content'===result.matches[i].key){if(!descDiv){descDiv=document.createElement('div');descDiv.setAttribute('class','mobile-search__item--desc');descDiv.innerHTML=generateHighlightedText(result.item.content.substring(0,150),result.matches[i].indices);}}else{if(result.item.description){descDiv=document.createElement('div');descDiv.setAttribute('class','mobile-search__item--desc');descDiv.innerHTML=result.item.description;}else{descDiv=document.createElement('div');descDiv.setAttribute('class','mobile-search__item--desc');descDiv.innerHTML=result.item.content.substring(0,150);}}}
li.appendChild(titleDiv);if(descDiv){li.appendChild(descDiv);}
ul.appendChild(a);}});}else{var item=document.createElement('span');ul.appendChild(item);}
let wrap=document.getElementById('search-mobile-results');while(wrap.firstChild){wrap.removeChild(wrap.firstChild)}
searchResults.appendChild(ul);}
function generateHighlightedText(text,regions){if(!regions){return text;}
var content='',nextUnhighlightedRegionStartingIndex=0;regions.forEach(function(region){if(region[0]===region[1]){return null;}
content+=''+
text.substring(nextUnhighlightedRegionStartingIndex,region[0])+
'<span class="search__highlight">'+
text.substring(region[0],region[1]+1)+
'</span>'+
'';nextUnhighlightedRegionStartingIndex=region[1]+1;});content+=text.substring(nextUnhighlightedRegionStartingIndex);return content;};var searchElem=document.getElementById('search');var searchMobile=document.getElementById('search-mobile');var searchResultsContainer=document.getElementById('search-results');searchElem?searchElem.addEventListener('input',function(e){if(!e.target.value|window.innerWidth<770){searchResultsContainer?searchResultsContainer.setAttribute('class','dd'):null;return null;}
searchText=e.target.value;var results=fuse.search(e.target.value);if(enableSearchHighlight){renderSearchHighlightResults(searchText,results);}else{renderSearchResults(searchText,results);}
var dropdownItems=searchResultsContainer.querySelectorAll('.dd-item');dropdownItems?dropdownItems.forEach(function(item){item.addEventListener('mousedown',function(e){e.target.click();});}):null;}):null;searchElem?searchElem.addEventListener('blur',function(){if(window.innerWidth<770){return null;}
searchResultsContainer?searchResultsContainer.setAttribute('class','dd'):null;}):null;searchElem?searchElem.addEventListener('click',function(e){if(window.innerWidth<770){return null;}
if(!e.target.value){searchResultsContainer?searchResultsContainer.setAttribute('class','dd'):null;return null;}
searchText=e.target.value;var results=fuse.search(e.target.value);if(enableSearchHighlight){renderSearchHighlightResults(searchText,results);}else{renderSearchResults(searchText,results);}
var dropdownItems=searchResultsContainer.querySelectorAll('.dd-item');dropdownItems?dropdownItems.forEach(function(item){item.addEventListener('mousedown',function(e){e.target.click();});}):null;}):null;var searchMenuElem=document.getElementById("search-menu");var activeItem=document.querySelector('#search-menu .dd-item.is-active');var activeIndex=null;var items=null;var searchContainerMaxHeight=350;searchElem?searchElem.addEventListener('keydown',function(e){if(window.innerWidth<770){return null;}
var items=document.querySelectorAll('#search-menu .dd-item');if(e.key==='ArrowDown'){if(activeIndex===null){activeIndex=0;items[activeIndex].classList.remove('is-active');}else{items[activeIndex].classList.remove('is-active');activeIndex=activeIndex===items.length-1?0:activeIndex+1;}
items[activeIndex].classList.add('is-active');let overflowedPixel=items[activeIndex].offsetTop+items[activeIndex].clientHeight-searchContainerMaxHeight;if(overflowedPixel>0){document.querySelector(".search-content").scrollTop+=items[activeIndex].getBoundingClientRect().height;}else if(activeIndex===0){document.querySelector(".search-content").scrollTop=0;}}else if(e.key==='ArrowUp'){if(activeIndex===null){activeIndex=items.length-1;items[activeIndex].classList.remove('is-active');}else{items[activeIndex].classList.remove('is-active');activeIndex=activeIndex===0?items.length-1:activeIndex-1;}
items[activeIndex].classList.add('is-active');let overflowedPixel=items[activeIndex].offsetTop+items[activeIndex].clientHeight-searchContainerMaxHeight;if(overflowedPixel<0){document.querySelector(".search-content").scrollTop-=items[activeIndex].getBoundingClientRect().height;}else{document.querySelector(".search-content").scrollTop=overflowedPixel+items[activeIndex].getBoundingClientRect().height;}}else if(e.key==='Enter'){var currentItemLink=items[activeIndex].getAttribute('href');if(currentItemLink){location.href=currentItemLink;}}else if(e.key==='Escape'){e.target.value=null;if(searchResults){searchResults.classList.remove('is-active');}}}):null;searchMobile?searchMobile.addEventListener('input',function(e){if(!e.target.value){let wrap=document.getElementById('search-mobile-results');while(wrap.firstChild){wrap.removeChild(wrap.firstChild);}
return null;}
searchText=e.target.value;var results=fuse.search(e.target.value);if(enableSearchHighlight){renderSearchHighlightResultsMobile(searchText,results);}else{renderSearchResultsMobile(searchText,results);}
var dropdownItems=searchResultsContainer.querySelectorAll('.dd-item');dropdownItems?dropdownItems.forEach(function(item){item.addEventListener('mousedown',function(e){e.target.click();});}):null;}):null;}</script><link rel=stylesheet href=/css/main.min.css><meta name=description content><meta name=keywords content><meta name=created content="0001-01-01T00:00:00+0000"><meta name=modified content="0001-01-01T00:00:00+0000"><meta property="og:site_name" content="Akrishna"><meta property="og:title" content="Performance and Scaling"><meta property="og:url" content="https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/"><meta property="og:type" content="article"><meta property="og:image" content="https://adhithyakrishna.github.io/tech/high_performance_java_persistence/hpjp_horizontal.jpg"><meta name=generator content="Hugo 0.77.0"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><link rel=canonical href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-512x512.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","headline":"Performance and Scaling","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","url":"https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/","description":"This notes is for the book - High performance java persistence An enterprise application needs to store and retrieve as much data and as fast as possible. In application â€¦","image":"https://adhithyakrishna.github.io/tech/high_performance_java_persistence/hpjp_horizontal.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://adhithyakrishna.github.io/"},"publisher":{"@type":"Organization","name":"Akrishna","url":"https://adhithyakrishna.github.io/"}}</script></head><body id=root class=theme__dark><script>var rootElem=document.getElementById('root');var themeOptions=JSON.parse("[\"dark\",\"light\"]");var localTheme=localStorage.getItem('theme');if(localTheme){if(themeOptions&&themeOptions.length>0){themeOptions.includes(localTheme)?rootElem.className=`theme__${localTheme}`:rootElem.className=`theme__${themeOptions[0]}`;}}</script><div id=container><div id=myDrawer class=drawer><div class=drawer__header><a href=/ class=drawer__header--text>Akrishna</a><div class=grow></div><div class=drawer__close><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M18.3 5.71c-.39-.39-1.02-.39-1.41.0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41.0s-.39 1.02.0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02.0 1.41s1.02.39 1.41.0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02.0-1.4z"/></svg></div></div><div class=drawer__body><div class=menu><h6 class=menu__label>Performance and Scaling</h6><ul><li class="menu__title--collapse active" data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/><span class=menu__title--collapse-text>High Performance Java Persistence</span>
<span class="menu__title--icon down"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class="menu__list active" data-data=/high_performance_java_persistence/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li class="menu__title--collapse active" data-depth=1 data-permalink=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/><span class=menu__title--collapse-text>Introduction</span>
<span class="menu__title--icon down"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class="menu__list active" data-data=/introduction/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/introduction/ class=menu__title data-depth=1>Preface</a></li><li><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/ class="menu__title active" data-depth=1>Performance and Scaling</a></li></ul><li class=menu__title--collapse data-depth=1 data-permalink=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/jdbc_and_database_essentials/><span class=menu__title--collapse-text>JDBC and Database essentials</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/jdbc_and_database_essentials/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/jdbc_and_database_essentials/jdbc_connection_management/ class=menu__title data-depth=1>JDBC connection management</a></li></ul></ul><li class=menu__title--collapse data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/><span class=menu__title--collapse-text>Java concurrency in practice</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/java_concurrency_in_practice/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li class="menu__title--collapse active" data-depth=1 data-permalink=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/introduction/><span class=menu__title--collapse-text>Introduction</span>
<span class="menu__title--icon down"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class="menu__list active" data-data=/introduction/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/introduction/introduction/ class=menu__title data-depth=1>Ch01 - Introduction</a></li><li><a href=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/introduction/benefits_of_threads/ class=menu__title data-depth=1>Ch02 - Benefits of Threads</a></li><li><a href=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/introduction/risks_of_threads/ class=menu__title data-depth=1>Ch03 - Risks of threads</a></li></ul><li class=menu__title--collapse data-depth=1 data-permalink=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/fundamentals/><span class=menu__title--collapse-text>Fundamentals</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/fundamentals/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/fundamentals/thread_safety/ class=menu__title data-depth=1>Ch01 - Thread Safety</a></li></ul></ul><li class=menu__title--collapse data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/><span class=menu__title--collapse-text>Kubernetes for absolute beginners</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/k8s_for_absolute_beginners/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/introduction/ class=menu__title data-depth=0>Introduction</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/k8s_architecture/ class=menu__title data-depth=0>Kubernetes architecture</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/yaml_introduction/ class=menu__title data-depth=0>Yaml Introduction</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/yaml_for_k8s/ class=menu__title data-depth=0>Yaml for Kubernetes</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/k8s_controllers/ class=menu__title data-depth=0>Kubernetes controllers</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/k8s_services/ class=menu__title data-depth=0>Kubernetes services</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/k8s_pods_demo/ class=menu__title data-depth=0>Demo - Voting application 1</a></li></ul><li class=menu__title--collapse data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/leetcode/><span class=menu__title--collapse-text>Leetcode</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/leetcode/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/leetcode/leetcode819/ class=menu__title data-depth=0>Most Common word</a></li><li><a href=https://adhithyakrishna.github.io/tech/leetcode/leetcode977/ class=menu__title data-depth=0>Squares of a sorted array</a></li></ul><li class=menu__title--collapse data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/golang/><span class=menu__title--collapse-text>Golang</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/golang/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/golang/dependencyinjection/ class=menu__title data-depth=0>Dependency injection in golang</a></li><li><a href=https://adhithyakrishna.github.io/tech/golang/embeddinginterfaces/ class=menu__title data-depth=0>Embedding Interfaces</a></li><li><a href=https://adhithyakrishna.github.io/tech/golang/chaininginterfaces/ class=menu__title data-depth=0>Chaining Interfaces</a></li><li><a href=https://adhithyakrishna.github.io/tech/golang/functiontypes/ class=menu__title data-depth=0>Function types</a></li></ul></ul></div><script>var menuTitle=document.querySelectorAll('.menu__title');var modal=document.getElementById("myModal");var drawer=document.getElementById('myDrawer');var closeDrawer=function(){setTimeout(function(){modal.style.opacity=0;drawer.style.left='-100%';modal.style.left='-100%';},250);}
menuTitle?menuTitle.forEach(function(elem){elem.onclick=function(){closeDrawer();localStorage.setItem('isDrawerOpen','false');}}):null;</script></div></div><div id=myModal class=modal></div><script>var isDrawerOpen=localStorage.getItem('isDrawerOpen');var modal=document.getElementById("myModal");var drawer=document.getElementById('myDrawer');var languagedir=JSON.parse("\"ltr\"");var openDrawer=function(){modal.style.opacity=1;if(languagedir==="rtl"){modal.style.right=0;drawer.style.right=0;}else{modal.style.left=0;drawer.style.left=0;}}
if(isDrawerOpen&&isDrawerOpen==='true'){openDrawer();}</script><nav class=nav><div class=navbar__wrapper data-bgimg=false><div class=divider><div class="navbar lmr"><div id=siteLogo class=navbar__logo--wrapper><a href=/ rel=home class=navbar__logo--link><img src=/logo.png alt=Home class=navbar__logo></a>
<a href=/ rel=home class=navbar__logo--text-link><h6 class=navbar__logo--text data-bgimg=false>Akrishna</h6></a></div><div class=navbar__menu--wrapper><div id=tabletLogo class=hide><a href=/ rel=home class=navbar__logo--link><img src=/logo.png alt=Home class=navbar__logo></a></div><div id=mobileLogo class=hide><a href=# class=navbar__logo--link><div class=navbar__icons--icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M4 18h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1s.45 1 1 1zm0-5h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1s.45 1 1 1zM3 7c0 .55.45 1 1 1h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1z"/></svg></div></a></div><span id=navMenuMobile class=hide><button id=navCollapseBtn class=navbar__dropdown--title aria-label="Section Menu" data-dir=ltr>
tech<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></button><div class=navbar__collapse data-open=false><ul><li class="navbar__menu--mobile-item active"><a href=/tech class=active>Tech</a></li></ul></div></span><ul id=navMenu class=navbar__menu><li class="navbar__menu--item active"><a href=/tech data-bgimg=false>Tech</a></li></ul></div><div class=grow></div><div id=siteSearch><div class=search data-bgimg=false><span class=icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></span><input id=search aria-label="Site Search" class=input type=text autocomplete=off placeholder=Search><div id=search-results class=dropdown><div id=search-menu class=dropdown-menu></div></div></div></div><div id=mobileSearch class=hide><div id=mobileSearchBtn class=mobile-search__btn><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></div><div id=search-mobile-container class="mobile-search hide"><div class=mobile-search__top><input id=search-mobile type=text aria-label="Mobile Search" placeholder=Search... class=mobile-search__top--input><div id=search-mobile-close class=mobile-search__top--icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path opacity=".87" fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41.0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></div></div><div id=search-mobile-results class=mobile-search__body></div></div></div><div class=navbar__icons><button id=toggleToDark class=navbar__icons--icon aria-label="Toggle to dark mode"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path fill="currentcolor" d="M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31.0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg></button>
<button id=toggleToLight class=navbar__icons--icon aria-label="Toggle to light mode"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path fill="currentcolor" d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31.0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21.0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/></svg></button>
<script>var theme=localStorage.getItem('theme');var toggleToLightBtn=document.getElementById('toggleToLight');var toggleToDarkBtn=document.getElementById('toggleToDark');if(theme&&theme==='dark'){toggleToLightBtn.className='navbar__icons--icon';toggleToDarkBtn.className='hide';}else{toggleToLightBtn.className='hide';toggleToDarkBtn.className='navbar__icons--icon';}</script><div class=navbar__icons--icon><a href=https://github.com/adhithyakrishna title="Github repository" aria-label="Github repository" target=_blank rel=noreferrer><svg fill="currentcolor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22"><path d="M10.9 2.1c-4.6.5-8.3 4.2-8.8 8.7-.5 4.7 2.2 8.9 6.3 10.5C8.7 21.4 9 21.2 9 20.8v-1.6s-.4.1-.9.1c-1.4.0-2-1.2-2.1-1.9-.1-.4-.3-.7-.6-1C5.1 16.3 5 16.3 5 16.2 5 16 5.3 16 5.4 16c.6.0 1.1.7 1.3 1 .5.8 1.1 1 1.4 1 .4.0.7-.1.9-.2.1-.7.4-1.4 1-1.8-2.3-.5-4-1.8-4-4 0-1.1.5-2.2 1.2-3C7.1 8.8 7 8.3 7 7.6c0-.4.0-.9.2-1.3C7.2 6.1 7.4 6 7.5 6h.1C8.1 6.1 9.1 6.4 10 7.3 10.6 7.1 11.3 7 12 7s1.4.1 2 .3c.9-.9 2-1.2 2.5-1.3h.1c.2.0.3.1.4.3C17 6.7 17 7.2 17 7.6c0 .8-.1 1.2-.2 1.4.7.8 1.2 1.8 1.2 3 0 2.2-1.7 3.5-4 4 .6.5 1 1.4 1 2.3v2.6c0 .3.3.6.7.5 3.7-1.5 6.3-5.1 6.3-9.3C22 6.1 16.9 1.4 10.9 2.1z"/></svg></a></div></div></div></div></div></nav><script>var siteLogo=document.getElementById('siteLogo');var tabletLogo=document.getElementById('tabletLogo');var mobileLogo=document.getElementById('mobileLogo');var navMenu=document.getElementById('navMenu');var navMenuMobile=document.getElementById('navMenuMobile');var siteSearch=document.getElementById('siteSearch');var mobileSearch=document.getElementById('mobileSearch');enquire.register("screen and (max-width:1280px)",{match:function(){siteLogo.className='navbar__logo--wrapper';tabletLogo.className='hide';mobileLogo.className='hide';navMenu.className='navbar__menu';navMenuMobile.className='hide';siteSearch.className='';mobileSearch.className='hide';},unmatch:function(){siteLogo.className='navbar__logo--wrapper';tabletLogo.className='hide';mobileLogo.className='hide';navMenu.className='navbar__menu';navMenuMobile.className='hide';siteSearch.className='';mobileSearch.className='hide';},}).register("screen and (max-width:960px)",{match:function(){siteLogo.className='hide';tabletLogo.className='';mobileLogo.className='hide';navMenu.className='navbar__menu';navMenuMobile.className='hide';siteSearch.className='hide';mobileSearch.className='navbar__icons--icon';},unmatch:function(){siteLogo.className='navbar__logo--wrapper';tabletLogo.className='hide';mobileLogo.className='hide';navMenu.className='navbar__menu';navMenuMobile.className='hide';siteSearch.className='';mobileSearch.className='hide';},}).register("screen and (max-width:600px)",{match:function(){siteLogo.className='hide';tabletLogo.className='hide';mobileLogo.className='';navMenu.className='hide';navMenuMobile.className='';siteSearch.className='hide';mobileSearch.className='navbar__icons--icon';},unmatch:function(){siteLogo.className='hide';tabletLogo.className='';mobileLogo.className='hide';navMenu.className='navbar__menu';navMenuMobile.className='hide';siteSearch.className='hide';mobileSearch.className='navbar__icons--icon';},});</script><div class=top><div class="header__wrapper bgcolor__header"><div class=divider><div class=lmr><h2 class=title>Performance and Scaling</h2></div></div></div><div class="header__wrapper bgcolor__breadcrumb"><div class=divider><div class="lmr flexbox"><nav class=breadcrumb aria-label=breadcrumbs data-is-blog=false><ol><li><a href=https://adhithyakrishna.github.io/ class=capitalize>Adhithyakrishna</a></li><li><a href=https://adhithyakrishna.github.io/tech/ class=capitalize>Tech</a></li><li><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/ class=capitalize>High Performance Java Persistence</a></li><li><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/ class=capitalize>Introduction</a></li><li class=is-active><span>Performance and Scaling</span></li></ol></nav><div class=grow></div><label class="switch switch__rel"><input id=toggle-sidebar aria-label="Toggle Sidebar Visibility" type=checkbox checked>
<span class=slider><span class=slider__icon><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M5 13h11.17l-4.88 4.88c-.39.39-.39 1.03.0 1.42.39.39 1.02.39 1.41.0l6.59-6.59c.39-.39.39-1.02.0-1.41l-6.58-6.6c-.39-.39-1.02-.39-1.41.0s-.39 1.02.0 1.41L16.17 11H5c-.55.0-1 .45-1 1s.45 1 1 1z"/></svg></span><span class="slider__icon hide"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03.0-1.42s-1.02-.39-1.41.0l-6.59 6.59c-.39.39-.39 1.02.0 1.41l6.59 6.59c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L7.83 13H19c.55.0 1-.45 1-1s-.45-1-1-1z"/></svg></span></span></label></div></div></div></div><div class=mid><div class=divider><nav id=single-menu class=l data-dir=ltr><div class=menu><h6 class=menu__label>Performance and Scaling</h6><ul><li class="menu__title--collapse active" data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/><span class=menu__title--collapse-text>High Performance Java Persistence</span>
<span class="menu__title--icon down"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class="menu__list active" data-data=/high_performance_java_persistence/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li class="menu__title--collapse active" data-depth=1 data-permalink=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/><span class=menu__title--collapse-text>Introduction</span>
<span class="menu__title--icon down"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class="menu__list active" data-data=/introduction/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/introduction/ class=menu__title data-depth=1>Preface</a></li><li><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/ class="menu__title active" data-depth=1>Performance and Scaling</a></li></ul><li class=menu__title--collapse data-depth=1 data-permalink=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/jdbc_and_database_essentials/><span class=menu__title--collapse-text>JDBC and Database essentials</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/jdbc_and_database_essentials/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/jdbc_and_database_essentials/jdbc_connection_management/ class=menu__title data-depth=1>JDBC connection management</a></li></ul></ul><li class=menu__title--collapse data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/><span class=menu__title--collapse-text>Java concurrency in practice</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/java_concurrency_in_practice/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li class="menu__title--collapse active" data-depth=1 data-permalink=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/introduction/><span class=menu__title--collapse-text>Introduction</span>
<span class="menu__title--icon down"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class="menu__list active" data-data=/introduction/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/introduction/introduction/ class=menu__title data-depth=1>Ch01 - Introduction</a></li><li><a href=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/introduction/benefits_of_threads/ class=menu__title data-depth=1>Ch02 - Benefits of Threads</a></li><li><a href=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/introduction/risks_of_threads/ class=menu__title data-depth=1>Ch03 - Risks of threads</a></li></ul><li class=menu__title--collapse data-depth=1 data-permalink=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/fundamentals/><span class=menu__title--collapse-text>Fundamentals</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/fundamentals/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/java_concurrency_in_practice/fundamentals/thread_safety/ class=menu__title data-depth=1>Ch01 - Thread Safety</a></li></ul></ul><li class=menu__title--collapse data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/><span class=menu__title--collapse-text>Kubernetes for absolute beginners</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/k8s_for_absolute_beginners/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/introduction/ class=menu__title data-depth=0>Introduction</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/k8s_architecture/ class=menu__title data-depth=0>Kubernetes architecture</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/yaml_introduction/ class=menu__title data-depth=0>Yaml Introduction</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/yaml_for_k8s/ class=menu__title data-depth=0>Yaml for Kubernetes</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/k8s_controllers/ class=menu__title data-depth=0>Kubernetes controllers</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/k8s_services/ class=menu__title data-depth=0>Kubernetes services</a></li><li><a href=https://adhithyakrishna.github.io/tech/k8s_for_absolute_beginners/k8s_pods_demo/ class=menu__title data-depth=0>Demo - Voting application 1</a></li></ul><li class=menu__title--collapse data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/leetcode/><span class=menu__title--collapse-text>Leetcode</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/leetcode/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/leetcode/leetcode819/ class=menu__title data-depth=0>Most Common word</a></li><li><a href=https://adhithyakrishna.github.io/tech/leetcode/leetcode977/ class=menu__title data-depth=0>Squares of a sorted array</a></li></ul><li class=menu__title--collapse data-depth=0 data-permalink=https://adhithyakrishna.github.io/tech/golang/><span class=menu__title--collapse-text>Golang</span>
<span class="menu__title--icon right"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="currentcolor" d="M9.29 15.88 13.17 12 9.29 8.12c-.39-.39-.39-1.02.0-1.41.39-.39 1.02-.39 1.41.0l4.59 4.59c.39.39.39 1.02.0 1.41L10.7 17.3c-.39.39-1.02.39-1.41.0-.38-.39-.39-1.03.0-1.42z"/></svg></span></li><ul class=menu__list data-data=/golang/ data-link=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/performance_and_scaling/><li><a href=https://adhithyakrishna.github.io/tech/golang/dependencyinjection/ class=menu__title data-depth=0>Dependency injection in golang</a></li><li><a href=https://adhithyakrishna.github.io/tech/golang/embeddinginterfaces/ class=menu__title data-depth=0>Embedding Interfaces</a></li><li><a href=https://adhithyakrishna.github.io/tech/golang/chaininginterfaces/ class=menu__title data-depth=0>Chaining Interfaces</a></li><li><a href=https://adhithyakrishna.github.io/tech/golang/functiontypes/ class=menu__title data-depth=0>Function types</a></li></ul></ul></div></nav><article id=list-main class=m data-dir=ltr><div class=single data-display=block><article class=single__contents data-dir=ltr><p><div class=featured-image__wrapper><img src=/tech/high_performance_java_persistence/hpjp_horizontal.jpg alt="Featured Image" class=featured-image style=width:;height:></div><br>This notes is for the book - <a href=https://vladmihalcea.com/books/high-performance-java-persistence/ target=_blank>High performance java persistence</a></p><p>An enterprise application needs to store and retrieve as much data and as fast as possible. In application performance management, the two most important metrics are,</p><ul><li>response time</li><li>throughput</li></ul><p>The lower the response time, the more responsive the application becomes. Scaling is about maintaining low latencies while the system load increases.</p><p><em>Response time</em> is measure of performance.<br><em>Throughput</em> is the measure of scalability.</p><h4 id=response-time-and-throughput>Response time and throughput</h4><p>The transaction response time is measured as the time it takes to <em>complete a transaction</em>. So it encompasses the following segments</p><ol><li>Database connection acquisition time</li><li>Time taken to send all the statements over the wire</li><li>Execution time for all the statements</li><li>Time taken for sending the results back to the db client</li><li>The time the transaction is <em>idle</em> due to application level computations prior to releasing the db connection.</li></ol><p><em>Throughput</em> is the rate of completing incoming load. In db context, throughput can be calculated as the number of transactions executed within a time interval.</p><p>X = transaction count / time</p><p>Lowering the execution time of the transaction, the system can accommodate more requests.</p><p>The throughput measured from a single request becomes baseline for further concurrency based improvements.</p><p>If the system was to scale linearly, adding more db connections would yield a proportional throughput increase. But, due to <em>contention</em> on db resources and cost of maintaining <em>coherency</em> across multiple concurrent db sessions, the relative throughput follows a <em>curve</em> instead of a straight line.</p><p>The <em>Universal Scalability law</em> can approximate the <em>maximum relative throughput</em> (system capacity) in relation to the number of load generators (database connections). USL formula is an extension to the widely known <em>Amdahl&rsquo;s law</em>.</p><ul><li>Contention coefficient - Serializable portion of the data processing routine. Contention has the effect of leveling up the scalability</li><li>Coherency coefficient - Cost of maintaining consistency across all concurrent db sessions. Coherency is responsible for the inflection point in the scalability curve. Its effect becomes more significant as the number of concurrent sessions increases.</li></ul><p>When coherency coefficient is zero, USL overlaps the Amdahl&rsquo;s law.</p><p>The number of db connections for which the system hits its maximum capacity depends on USL coefficients solely.</p><h4 id=database-connections-boundaries>Database connections boundaries</h4><p>Every connection requires a TCP socket from client (app) to the server (db).</p><p>The total number of connections offered by a database server depends on the underlying hardware resources.</p><p>PostgreSQLÂ is implemented using a simpleÂ &ldquo;process per user&rdquo;Â client/server model. In this model there is oneÂ <em>client process</em>Â connected to exactly oneÂ <em>server process</em>. <a href=https://www.postgresql.org/docs/9.5/connect-estab.html target=_blank>[1]</a></p><p>Database system internals reveal tight dependency on CPU, Memory and Disk resources. The database uses <em>buffer pool</em> to map into memory the underlying data and index pages. Changes are first applied in memory, and flushed to disk in batches to achieve better write performance.</p><p>The db might still need to access disk to fetch associated data pages into memory buffer pool. To provide data consistency, locks are used to protect data blocks from being updated concurrently. This means that a <em>high-throughput</em> db application will experience contention CPU, Memory, Disks and Locks. When all the db server resources are in use, adding more work will only increase the contention, thereby reducing the throughput.</p><p><strong>Resources might get saturated due to improper system configuration, the first step to improve the system throughput is to tune it according to current data access patterns</strong></p><div class="notices info" data-title="Note on capacity planning">Capacity planning is a feedback driven mechanism, and it requires constant application monitoring. Any optimization must be reinforced by application performance metrics.</div><h4 id=scaling-up-and-scaling-out>Scaling up and scaling out</h4><p>Scaling is the effect of increasing the capacity by adding more resources.</p><ul><li>Scaling vertically - Adding more resource to a single machine.</li><li>Scaling horizontally - Increasing the number of available machines.</li></ul><p>Traditionally, scaling vertically has been the preferred way of increasing the database capacity. Distributed systems are much more complex to manage than the centralized ones, hence scaling horizontally is more challenging. Instead of a high performance server, for the same price, one could buy multiple commodity machines whose sum of available resources is much greater than the single dedicated server.</p><p>No matter how powerful a single dedicated server may be, it is still a <strong>single point of failure</strong>.</p><h5 id=master-worker-replication>Master-Worker replication</h5><p>When <strong>read / write</strong> ratio is high, a Master - Worker replication scheme is suitable for increasing availability. The master is the system of record and the only node accepting writes. All changes recorded by master node are replayed onto workers.</p><p>A <em>binary replication</em> uses Master node WAL (Write Ahead Log), while a <em>statement-based replication</em> replays on the worker machine, the exact statements executed on master.</p><ul><li><em>Asynchronous replication</em> is common when there are more worker nodes to update. The worker nodes are eventually consistent. In case a master node crashes, there is a <em>cluster-wide</em> voting process to elect the new master. This is usually node that has the most recent update record from the list of all available workers. The Asynchronous replication topology is also referred to as warm standby because the election process doesn&rsquo;t happen instantaneously. When only asynchronous workers are available, the newly elected worker might lag behind failed master, in which consistency and durability are traded for lower latency and higher throughput.</li><li><em>Synchronous replication</em> allows system to ensure there is data consistency in case of Master node failure, since the synchronous worker is an exact copy of the master. The synchronous Master-worker replication is called <em>hot standby topology</em> because the synchronous worker node is readily available for replacing the master node.</li></ul><p>Aside from eliminating the single point of failure, db replication can also increase the throughput. Since the worker node only accept read-only transactions, therefore routing read traffic away from the Master node. This reduced the master node resource contention, and lowers the read-write transaction response time. If the master node can no longer keep up with ever increasing read-write traffic, a multi master replication might be a better alternative.</p><h5 id=multi-master-replication>Multi-Master replication</h5><p>In this scheme, all nodes are equal and can accept both read-only and read-write transactions. Splitting the load among multiple nodes can not only increase the transaction throughput but also reduce the response time.</p><p>Ensuring <strong>data consistency</strong> is challenging in Multi-Master replication scheme because there is no longer a single source of truth. Same data can be modified concurrently on separate nodes, so there is a possibility of conflicting updates. The replication schema can either avoid conflicts or detect them and apply automatic conflict resolution algorithm.</p><p>A <em>two phase</em> commit protocol can be used to enlist all participating nodes in one distributed transaction. This allows all the nodes to be in-sync all the time, at the cost of increasing the transaction response time (by slowing down write operations).</p><p>If nodes are separated by WAN (Wide area network), synchronization latencies can increase dramatically. If one node is no longer reachable, the synchronization could fail and the transaction will roll back on all masters.</p><ul><li>Synchronous replication - Although it provides data consistency, might incur high transaction response time.</li><li>Asynchronous replication - Although it provides better through put, it has to do it at the cost of having to resolve conflicts. The async master-master replication requires a conflict detection and automatic conflict resolution algorithms. When a conflict is detected, that automatic resolution tries to merge the two conflicting branches, and if it fails, manual intervention is required.</li></ul><h5 id=sharding>Sharding</h5><p>When the data size grows beyond the overall capacity of replicated multi-node environment, splitting data becomes unavoidable. Sharding means distributing data across multiple nodes, so that each node has only subset of data.<br>As opposed to horizontal partitioning (distribute data across multiple tables within the same db server), sharding requires a distributed systems topology so that the data is spread across multiple machines.</p><p>Each shard must be self contained (each transaction should use data only from a single shard). Joins across shards is usually prohibited because the cost of distributed locking and the networking overhead would lead to long transaction response times.</p><p>By reducing the data size to be store in each node, indexes will require less space and can it into main memory. With less data to query, the transaction response time can get shorter.</p><p>Each sharding topology includes at least two separate data centers. Each can serve a dedicated geographical region, so that the load is balanced across geographical regions. Smaller tables can be duplicated on each nodes to increase performance. Asynchronous replication mechanism can be employed to keep the shards in-sync.</p><p>Sharding is usually the last resort strategy, after exhausting all other available options such as</p><ol><li>Optimizing data layer to deliver lower transaction response time</li><li>Scaling each replicated node to a cost-effective configuration</li><li>Adding more replicated nodes until synchronization latencies start dropping below acceptable threshold.</li></ol></article></div><div class=grow></div><nav class=pagination-single><a href=https://adhithyakrishna.github.io/tech/high_performance_java_persistence/introduction/introduction/ title=Preface class=pagination-single__left><div class=pagination-single__icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03.0-1.42s-1.02-.39-1.41.0l-6.59 6.59c-.39.39-.39 1.02.0 1.41l6.59 6.59c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L7.83 13H19c.55.0 1-.45 1-1s-.45-1-1-1z"/></svg></div><div class=pagination-single__right-title>Preface</div></a><div class=grow></div></nav></article><section id=list-side class=r data-dir=ltr><div class=toc><h6 class=toc__label>What's on this Page</h6><div class=toc__body><nav id=TableOfContents><ul><li><a href=#response-time-and-throughput>Response time and throughput</a></li><li><a href=#database-connections-boundaries>Database connections boundaries</a></li><li><a href=#scaling-up-and-scaling-out>Scaling up and scaling out</a><ul><li><a href=#master-worker-replication>Master-Worker replication</a></li><li><a href=#multi-master-replication>Multi-Master replication</a></li><li><a href=#sharding>Sharding</a></li></ul></li></ul></nav></div></div></section></div></div><script>'use strict';function wrap(el,wrapper){el.parentNode.insertBefore(wrapper,el);wrapper.appendChild(el);}
(function(){var singleContentsElem=document.querySelector('.single__contents');singleContentsElem?singleContentsElem.querySelectorAll('pre > code').forEach(function(elem){var dataLang=elem.getAttribute('data-lang');var dataLangWrapper=document.createElement('div');var code=null;var codeTitle=null;if(dataLang&&dataLang.includes(':')){code=dataLang.split(':')[0];codeTitle=dataLang.split(':')[1];dataLangWrapper.className='language-'+code;dataLangWrapper.setAttribute('data-lang',codeTitle);elem.className='language-'+code;elem.setAttribute('data-lang',codeTitle);elem.setAttribute('id',codeTitle);}
if(!dataLang||codeTitle){wrap(elem.parentNode,dataLangWrapper);}}):null;})();var dollarCodeElem=document.querySelectorAll('div.language-\\$');var gtCodeElem=document.querySelectorAll('div.language-\\>');dollarCodeElem?dollarCodeElem.forEach(function(elem){var lnts=elem.parentNode.parentNode?elem.parentNode.parentNode.querySelectorAll('.lnt'):null;lnts?lnts.forEach(function(lnt){lnt.innerHTML='$<br/>';}):null;}):null;gtCodeElem?gtCodeElem.forEach(function(elem){var lnts=elem.parentNode.parentNode?elem.parentNode.parentNode.querySelectorAll('.lnt'):null;lnts?lnts.forEach(function(lnt){lnt.innerHTML='><br/>';}):null;}):null;</script><script defer src=/js/helper/getParents.min.js></script><script defer src=/js/helper/closest.min.js></script><script defer src=/js/helper/prev.min.js></script><script defer src=/js/helper/prop.min.js></script><script defer src=/js/helper/fadeinout.min.js></script><script>document.addEventListener('DOMContentLoaded',function(){'use strict';var tables=document.querySelectorAll('.single__contents > table');for(let i=0;i<tables.length;i++){var table=tables[i];var wrapper=document.createElement('div');wrapper.className='table-wrapper';table.parentElement.replaceChild(wrapper,table);wrapper.appendChild(table);}
var lib=JSON.parse("null");if(lib&&lib.includes('mermaid')){var themeVariant=localStorage.getItem('theme')||'light';if(themeVariant==="dark"){mermaid.initialize({theme:'dark'});}else{mermaid.initialize({theme:'default'});}
var mermaids=[];[].push.apply(mermaids,document.getElementsByClassName('language-mermaid'));mermaids.forEach(function(elem){var elemParentNode=elem.parentNode;if(elemParentNode!==document.body){elemParentNode.parentNode.insertBefore(elem,elemParentNode);elemParentNode.parentNode.removeChild(elemParentNode);}
var newElemWrapper=document.createElement('div');newElemWrapper.classList.add('mermaid');newElemWrapper.innerHTML=elem.innerHTML;elem.replaceWith(newElemWrapper);});}
if(lib&&lib.includes('katex')){var mathElements=document.getElementsByClassName('math');var options={delimiters:[{left:"$$",right:"$$",display:true},{left:"\\[",right:"\\]",display:true},{left:"$",right:"$",display:false},{left:"\\(",right:"\\)",display:false}],};renderMathInElement(document.querySelector('.single__contents'),options);}
if(lib&&lib.includes('flowchartjs')){var options=JSON.parse("{\"arrow-end\":\"block\",\"element-color\":\"black\",\"fill\":\"white\",\"flowstate\":{\"approved\":{\"fill\":\"#58C4A3\",\"font-size\":12,\"no-text\":\"n/a\",\"yes-text\":\"APPROVED\"},\"current\":{\"fill\":\"yellow\",\"font-color\":\"red\",\"font-weight\":\"bold\"},\"future\":{\"fill\":\"#FFFF99\"},\"invalid\":{\"fill\":\"#444444\"},\"past\":{\"fill\":\"#CCCCCC\",\"font-size\":12},\"rejected\":{\"fill\":\"#C45879\",\"font-size\":12,\"no-text\":\"REJECTED\",\"yes-text\":\"n/a\"},\"request\":{\"fill\":\"blue\"}},\"font-color\":\"black\",\"font-size\":14,\"line-color\":\"black\",\"line-length\":50,\"line-width\":3,\"no-text\":\"no\",\"scale\":1,\"symbols\":{\"end\":{\"class\":\"end-element\"},\"start\":{\"element-color\":\"green\",\"fill\":\"yellow\",\"font-color\":\"red\"}},\"text-margin\":10,\"x\":0,\"y\":0,\"yes-text\":\"yes\"}");var jsonContent=null;var flowchartPrefix="language-flowchart";var index=0;Array.prototype.forEach.call(document.querySelectorAll("[class^="+flowchartPrefix+"]"),function(x){x.style.display='none'
x.parentNode.style.backgroundColor="transparent"
jsonContent=x.innerText;var node0=document.createElement('div');node0.id='flowchart'+index;x.parentNode.insertBefore(node0,x);var diagram=flowchart.parse(jsonContent);diagram.drawSVG("flowchart"+index,options);index+=1;});}
if(lib&&lib.includes('chart')){var borderColor="#666";var bgColor="#ddd";var borderWidth=2;Chart.defaults.global.elements.rectangle.borderWidth=borderWidth;Chart.defaults.global.elements.rectangle.borderColor=borderColor;Chart.defaults.global.elements.rectangle.backgroundColor=bgColor;Chart.defaults.global.elements.line.borderWidth=borderWidth;Chart.defaults.global.elements.line.borderColor=borderColor;Chart.defaults.global.elements.line.backgroundColor=bgColor;Chart.defaults.global.elements.point.borderWidth=borderWidth;Chart.defaults.global.elements.point.borderColor=borderColor;Chart.defaults.global.elements.point.backgroundColor=bgColor;var chartPrefix="language-chart";var index=0;var jsonContent=null;Array.prototype.forEach.call(document.querySelectorAll("[class^="+chartPrefix+"]"),function(x){x.style.display='none'
x.parentNode.style.backgroundColor="transparent"
jsonContent=x.innerText;var node0=document.createElement('canvas');var source=null;node0.height=200;node0.style.height=200;node0.id='myChart'+index;source=JSON.parse(jsonContent);x.parentNode.insertBefore(node0,x);var ctx=document.getElementById('myChart'+index).getContext('2d');var myChart=new Chart(ctx,source);index+=1;});}
if(lib&&lib.includes('viz')){var vizPrefix="language-viz-";Array.prototype.forEach.call(document.querySelectorAll("[class^="+vizPrefix+"]"),function(x){x.style.display='none'
x.parentNode.style.backgroundColor="transparent"
var engine;x.getAttribute("class").split(" ").forEach(function(cls){if(cls.startsWith(vizPrefix)){engine=cls.substr(vizPrefix.length);}});var viz=new Viz();viz.renderSVGElement(x.innerText,{engine:engine}).then(function(element){element.style.width="100%";x.parentNode.insertBefore(element,x);})});}});</script><script>var listSide=document.getElementById('list-side');var listMain=document.getElementById('list-main');var singleMenu=document.getElementById('single-menu');var switchElem=document.querySelector('.switch');var wideViewAsDefault=JSON.parse("null");enquire.register("screen and (max-width:1280px)",{match:function(){if(wideViewAsDefault){singleMenu.className='l';listMain.className='mr';listSide.className='hide';}else{singleMenu.className='l';listMain.className='m';listSide.className='r';}},unmatch:function(){if(wideViewAsDefault){singleMenu.className='l';listMain.className='mr';listSide.className='hide';}else{listSide.className='r';listMain.className='m';singleMenu.className='l';}},}).register("screen and (max-width:960px)",{match:function(){singleMenu.className='l';listMain.className='mr';listSide.className='hide';switchElem.className='hide';},unmatch:function(){if(wideViewAsDefault){singleMenu.className='l';listMain.className='mr';listSide.className='hide';}else{singleMenu.className='l';listMain.className='m';listSide.className='r';}
switchElem.className='switch';},}).register("screen and (max-width:600px)",{match:function(){listSide.className='hide';listMain.className='lmr';singleMenu.className='hide';switchElem.className='hide';},unmatch:function(){listSide.className='hide';listMain.className='mr';singleMenu.className='l';switchElem.className='hide';},});</script><div class=bot><footer class=footer><div class=divider><div class=lmr><p class=caption>Â©2024, All Rights Reserved</p></div></div></footer></div></div></body></html>